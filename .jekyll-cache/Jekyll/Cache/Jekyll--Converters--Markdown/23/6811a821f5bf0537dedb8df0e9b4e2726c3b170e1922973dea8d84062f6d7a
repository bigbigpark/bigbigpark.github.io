I"³<p>C++ ì•„ë‹ˆê³  Cë¡œ ì†Œì¼“í†µì‹  ì‘ì„±í•˜ê¸°! <br /></p>

<p>ì†Œì¼“í†µì‹  í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ ì§œê¸° <br /></p>

<h2 id="ë¬¸ì œ-ì •ì˜">ë¬¸ì œ ì •ì˜</h2>

<p>í´ë¼ì´ì–¸íŠ¸ ì—­í• : <code class="language-plaintext highlighter-rouge">write</code> <br />
ì›í•˜ëŠ” ë©”ì„¸ì§€ë¥¼ write í•´ë³´ì !!</p>

<h2 id="ì½”ë“œ">ì½”ë“œ</h2>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// C++ TCP í´ë¼ì´ì–¸íŠ¸ í”„ë¡œê·¸ë¨</span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;arpa/inet.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;sys/socket.h&gt;</span><span class="cp">
</span>
<span class="kt">void</span> <span class="nf">error_handling</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">message</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">fputs</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">stderr</span><span class="p">);</span>
  <span class="n">fputc</span><span class="p">(</span><span class="sc">'\n'</span><span class="p">,</span> <span class="n">stderr</span><span class="p">);</span>
  <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
  <span class="kt">int</span> <span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="p">(</span><span class="n">PF_INET</span><span class="p">,</span> <span class="n">SOCK_STREAM</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="k">if</span><span class="p">(</span><span class="n">sock</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
      <span class="n">error_handling</span><span class="p">(</span><span class="s">"socket() error"</span><span class="p">);</span>

  <span class="c1">// í´ë¼ì´ì–¸íŠ¸ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì£¼ì†Œì •ë³´ë¥¼ ì´ˆê¸°í™”</span>
  <span class="k">struct</span> <span class="nc">sockaddr_in</span> <span class="n">serv_addr</span><span class="p">;</span>
  <span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">serv_addr</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">serv_addr</span><span class="p">));</span>
  <span class="n">serv_addr</span><span class="p">.</span><span class="n">sin_family</span><span class="o">=</span><span class="n">AF_INET</span><span class="p">;</span>
  <span class="n">serv_addr</span><span class="p">.</span><span class="n">sin_addr</span><span class="p">.</span><span class="n">s_addr</span><span class="o">=</span><span class="n">inet_addr</span><span class="p">(</span><span class="s">"192.168.0.18"</span><span class="p">);</span>
  <span class="n">serv_addr</span><span class="p">.</span><span class="n">sin_port</span><span class="o">=</span><span class="n">htons</span><span class="p">(</span><span class="n">atoi</span><span class="p">(</span><span class="s">"23000"</span><span class="p">));</span>
  
  <span class="c1">// ì„œë²„ì˜ ì£¼ì†Œì •ë³´ë¡œ í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ì´ ì—°ê²°ìš”ì²­ì„ í•œë‹¤.</span>
  <span class="k">if</span><span class="p">(</span><span class="n">connect</span><span class="p">(</span><span class="n">sock</span><span class="p">,</span> <span class="p">(</span><span class="k">struct</span> <span class="nc">sockaddr</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">serv_addr</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">serv_addr</span><span class="p">))</span><span class="o">==-</span><span class="mi">1</span><span class="p">)</span> 
  <span class="p">{</span>
    <span class="n">error_handling</span><span class="p">(</span><span class="s">"connect() error!"</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// Send a message</span>
  <span class="kt">char</span> <span class="n">msg</span><span class="p">[]</span> <span class="o">=</span> <span class="s">"Hello world!"</span><span class="p">;</span>
  <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">write</span><span class="p">(</span><span class="n">sock</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">msg</span><span class="p">));</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"Send message to server: %s </span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">msg</span><span class="p">);</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="n">close</span><span class="p">(</span><span class="n">sock</span><span class="p">);</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="reference">Reference</h2>
<ul>
  <li><a href="https://const-human.tistory.com/12">â€œ[Linux]TCP ì„œë²„/í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„â€</a></li>
</ul>
:ET